(this["webpackJsonphabit-tracker-react-ts"]=this["webpackJsonphabit-tracker-react-ts"]||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(20)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(5),c=n.n(i),o=(n(13),n(3)),l=n(7),u=n(6),d=n(22);function s(e){return e?e.map((function(e){return{id:e.id,title:e.title,ledger:Array.from(e.ledger)}})):[]}function f(e){return e?e.map((function(e){return{id:e.id,title:e.title,ledger:new Set(e.ledger)}})):[]}var m=Object(a.createContext)({habits:[],addHabit:function(e){},deleteHabit:function(e){},addEntry:function(e,t){},deleteEntry:function(e,t){}}),E=function(e,t){switch(t.type){case"ADD_ITEM":return console.log("addHabit Called",{action:t}),function(e,t){if(void 0===t)return e;var n={id:Object(d.a)(),title:t,ledger:new Set};return[].concat(Object(u.a)(e),[n])}(e,t.title);case"DELETE_ITEM":return console.log("deleteHabit Called",{action:t}),function(e,t){return void 0===t?e:e.filter((function(e){return e.id!==t}))}(e,t.id);case"ADD_ENTRY":return console.log("addEntry Called",{action:t}),function(e,t,n){return void 0===t||void 0===n?e:e.map((function(e){return e.id===t?Object(l.a)({},e,{ledger:e.ledger.add(n)}):e}))}(e,t.id,t.date);case"DELETE_ENTRY":return console.log("deleteEntry Called",{action:t}),function(e,t,n){return void 0===t||void 0===n?e:e.map((function(e){return e.id===t&&e.ledger.delete(n),e}))}(e,t.id,t.date);case"LOAD_HABITS":return console.log("habits loaded",{action:t}),t.habits?t.habits:[];default:return e}},b=function(e){var t=Object(a.useReducer)(E,[]),n=Object(o.a)(t,2),i=n[0],c=n[1];Object(a.useEffect)((function(){var e=localStorage.getItem("stored-habits");if(e){var t=JSON.parse(e);c({type:"LOAD_HABITS",habits:f(t.habits)})}}),[]),Object(a.useEffect)((function(){var e=JSON.stringify({habits:s(i)});localStorage.setItem("stored-habits",e)}),[i]);var l={habits:i,addHabit:function(e){return c({type:"ADD_ITEM",title:e})},deleteHabit:function(e){return c({type:"DELETE_ITEM",id:e})},addEntry:function(e,t){return c({type:"ADD_ENTRY",id:e,date:t})},deleteEntry:function(e,t){return c({type:"DELETE_ENTRY",id:e,date:t})}};return r.a.createElement(m.Provider,{value:l},e.children)};n(14);function h(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())}function v(e,t){var n=Number(new Date(e));return h(new Date(n-864e5*t))}function g(e,t){for(var n=[],a=0;a<t;++a)n.push(v(e,a));return n}n(15);var p=function(e){var t=e.id,n=e.date,i=e.status,c=Object(a.useContext)(m);return r.a.createElement("div",{className:"date-block ".concat(i?"green":"red"),onClick:function(){return function(e,t){var n=c.habits.find((function(t){return t.id===e}));return console.log(n),void 0===n?alert("Habit id doesn't exist"):n.ledger.has(t)?c.deleteEntry(e,t):c.addEntry(e,t)}(t,n)}})},y=(n(16),function(e){var t=e.habit,n=t.id,a=t.ledger,i=e.days,c=g(e.date,i),o=function(e,t){return e.map((function(e){return!!t.has(e)}))}(c,a);return r.a.createElement("div",{className:"date-block-container"},o.map((function(e,t){return r.a.createElement(p,{key:t,id:n,date:c[t],status:e})})))}),D=function(e){var t=e.id,n=e.title,i=e.ledger,c=Object(a.useContext)(m);return r.a.createElement("div",{className:"habit-card",onDoubleClick:function(){return c.deleteHabit(t)}},r.a.createElement("div",{className:"habit-title"},n),r.a.createElement(y,{date:h(new Date),days:10,habit:{id:t,title:n,ledger:i}}))},N=(n(17),function(){var e=Object(a.useContext)(m),t=g(h(new Date),10);return t.reverse(),r.a.createElement("div",{className:"habits-container"},r.a.createElement("div",{className:"container-title"},t.map((function(e){return r.a.createElement("div",{className:"date-hint",key:e},"".concat(new Date(e).getDate(),"/").concat(new Date(e).getMonth()))}))),r.a.createElement("div",null,e.habits.map((function(e){return r.a.createElement(D,Object.assign({key:e.id},e))}))))}),O=(n(18),n(19),function(){var e=Object(a.useContext)(m),t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],c=n[1];return r.a.createElement("div",{className:"add-habit-container"},r.a.createElement("form",{className:"add-habit",onSubmit:function(e){e.preventDefault(),c("")}},r.a.createElement("input",{type:"text",placeholder:"Add New Habit",value:i,onChange:function(e){return c(e.target.value)}}),r.a.createElement("button",{onClick:function(){return e.addHabit(i)}},"\u279c")),r.a.createElement("hr",{className:"division"}))}),w=function(){return r.a.createElement(b,null,r.a.createElement("header",{className:"header"},r.a.createElement("span",{className:"header-text"},"\u21ba Repeat")),r.a.createElement("div",{className:"main-container"},r.a.createElement(O,null),r.a.createElement(N,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.8a76aedb.chunk.js.map